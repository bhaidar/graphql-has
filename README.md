### TypeScript, Express, GraphQL microservice seed

[![Build Status](https://travis-ci.org/marcellobarile/typescript-express-graphql-seed.svg?branch=master)](https://travis-ci.org/marcellobarile/typescript-express-graphql-seed)

**Tech. stack:**
---
1. Webpack 4 + TypeScript 2.9
2. Express 4 + ejs
3. Apollo Server 2
4. GraphQL
6. Lodash
7. Request Promise
5. NSP - Node Security Platform
6. PM2 ready

**Setup**
---
```
npm install
```

**First run after the setup**
---
If you are on production you just need to run the `npm run prod` command.
If you are on dev and you still have to define your schema then do your changes under the "graphql" folder;
once finished just run the server or use the wizard (```npm help```) to generate TypeScript interfaces and GraphQL assets.

**After having changed the schema or GraphQL types**
---
This service is capable to automatically create fragments, typescript interfaces and the schema.graphql file for you...
it also intercepts changes on graphql files and, if any, triggers the generation process during the bootstrap.
If you want to execute this procedure manually just run ```npm run prepare-graphql```

**How to work with autogenerated interfaces**
---
It is important, after having added or changed something to the GraphQL schemas, to generate the interfaces before using them to implements our custom classes.
To do so, you can run the server immediately after or use the wizard (```npm help```).
You can also share these interfaces + fragments with UI WebApps.

**Run Builds**
---
```
npm run build:dev
```
```
npm run build:stage
```
```
npm run build:prod
```

**Run Application locally**
---
DEV env.:
```
npm run dev1
npm run dev2
npm run dev3
```

TEST env.:
```
npm run test1
npm run test2
npm run test3
```

PROD env.:
```
npm run prod
```

**GraphQL to TypeScript - autogenerate schema, types, fragments and TS interfaces**
---
```
npm run prepare-graphql
```

**Manual vulnerability check**
---
```
npm run check-vuln
```

**Run Tests**
---
```
npm run test
```

**Prod. PM2 first run**
---
```
npm run pm2:prod:first-run
```
Remember to run `pm2 save` to dump the processes list

**Manually install typings**
---
Even if deprecated, execute ```npm run install-typings``` to manually install typings

**Generate documentation**
---
```npm run docs``` to automatically generate documentation, ```npm run docs:clean``` to remove it

** Structure **
---
```
├── app.ts
├── .tmp
├── .vs
├── bin
│   └── www.ts
├── build
│   └── compiled
├── config
|   ├── apis
|   |   ├── dev.js
|   |   ├── index.js
|   |   ├── prod.js
|   |   └── test.js
|   ├── common.ts
|   ├── webpack.config.js
|   ├── webpack.production.config.js
│   └── webpack.stage.config.js
├── package.json
├── README.md
├── graphql
|   ├── types
|   |   └── [...]
|   ├── base.graphql
|   └── index.ts
├── server
|   ├── connectors
|   ├── errors
|   ├── helpers
|   ├── resolvers
|   ├── routes
|   ├── schemas
│   └── views
│       ├── error.ejs
│       └── index.ejs
├── .editorconfig
├── .gitignore
├── .graphqlconfig
├── .travis.yml
├── ecosystem.config.js
├── package-lock.json
├── package.json
├── README
└── tsconfig.json
```

*This module was made possible thanks to [LearnMEAN.com](https://www.learnmean.com/)*
